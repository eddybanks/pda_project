<% @header="Transactions" %>
<div class="panel-body">
  <div class="row">
    <div class="col-md-12">
      <%= render 'layouts/search' %>
      <h2><%= link_to 'Add New Tuple', new_transaction_path, class: "btn btn-primary" %></h2>
      <div id="transactionstable" class="table-responsive">

        <table class="table table-striped">

          <thead>
            <th>Number</th>
            <th>Date</th>
            <th>Type</th>
            <th>Price</th>
            <th>Visitor Name</th>
            <th colspan='3'>Actions</th>
          </thead>

          <tbody>

            <% @transactions.each do |transaction| %>
            <% @visitor = Visitor.find_by id: transaction.visitor_id %>
            <tr>
              <td><%= transaction.id %></td>
              <td><%= transaction.date.strftime("%B %d, %Y") %></td>
              <td><%= transaction.type %></td>
              <td><%= transaction.price %></td>
              <td><%= @visitor.name %></td>
              <td><p data-placement="top" data-toggle="tooltip" title="Show"><%= link_to raw('<span class="glyphicon glyphicon-open"></span>'), transaction_path(transaction), class: "btn btn-primary btn-xs" %></p></td>
              <td><p data-placement="top" data-toggle="tooltip" title="Edit"><%= link_to raw('<span class="glyphicon glyphicon-pencil"></span>'), edit_transaction_path(transaction), class: "btn btn-primary btn-xs" %></p></td>
              <td><p data-placement="top" data-toggle="tooltip" title="Delete"><%= link_to raw('<span class="glyphicon glyphicon-trash"></span>'), transaction_path(transaction), method: 'delete', data: { :confirm => "Are you sure you want to delete the entry for the #{transaction.type} transaction with transaction number #{transaction.id}?" }, class: "btn btn-danger btn-xs" %></p></td>
            </tr>

            <% end %>

          </tbody>

        </table>

        <%= will_paginate @attractions %>

      </div>
    </div>
  </div>
</div>
